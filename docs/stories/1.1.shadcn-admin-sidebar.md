# Story 1.1: Implement shadcn Admin Sidebar System

## Status
Approved

## Story

**As a** Community Sports Network admin user (Sports Admin Coordinator, Content Manager, System Administrator),
**I want** a modern, organized, and responsive sidebar navigation system in the admin dashboard,
**so that** I can efficiently navigate between different admin sections, quickly access related functions, and work effectively on both desktop and mobile devices.

## Acceptance Criteria

1. **Sidebar Structure**: Replace current basic AdminSidebar with shadcn Sidebar system featuring 4 organized groups:
   - Live Operations (Dashboard, Live Games, Schedule)
   - Content Management (Shows, News, Media)
   - User & Teams (Teams, User Management, Chat Moderation)
   - Analytics & System (Statistics, Analytics, Settings)
   
   Note: Media and Analytics routes need to be added to match the specification

2. **Soft Pop Theme Integration**: Apply Soft Pop shadcn theme with purple/cyan color palette and modern styling

3. **Desktop Functionality**: 
   - Collapsible sidebar with icon-only mode
   - Keyboard shortcut (Cmd/Ctrl + B) to toggle
   - Tooltips in collapsed mode
   - Smooth animations (200ms transitions)

4. **Mobile Responsiveness**:
   - Sheet overlay navigation on mobile devices
   - Touch-friendly targets (minimum 44px)
   - Hamburger menu trigger in header

5. **Active State Management**: Highlight current page and expand parent group automatically

6. **Accessibility Compliance**: WCAG 2.1 AA compliance with full keyboard navigation and screen reader support

## Tasks / Subtasks

- [x] Install and Configure Soft Pop Theme (AC: 2)
  - [x] Run `pnpm dlx shadcn@latest add https://tweakcn.com/r/themes/soft-pop.json`
  - [x] Verify theme application and CSS variables

- [ ] Update AdminLayout Component (AC: 1, 3, 4)
  - [ ] Replace current layout with SidebarProvider wrapper
  - [ ] Implement SidebarInset for main content area
  - [ ] Update responsive layout structure

- [ ] Add Missing Navigation Routes (AC: 1)
  - [ ] Create /admin/media page structure (placeholder if needed)
  - [ ] Create /admin/analytics page structure (placeholder if needed)
  - [ ] Add appropriate Lucide icons (Image, TrendingUp or similar)

- [ ] Rewrite AdminSidebar Component (AC: 1, 2, 3, 4, 5)
  - [ ] Replace basic Button navigation with shadcn Sidebar components
  - [ ] Implement 4 SidebarGroup sections with proper labels and all 12 navigation items
  - [ ] Configure SidebarMenu and SidebarMenuItem components
  - [ ] Add collapsible functionality with icon-only mode
  - [ ] Implement active state detection using usePathname()

- [ ] Update AdminHeader Component (AC: 4)
  - [ ] Add SidebarTrigger for mobile hamburger menu
  - [ ] Integrate with responsive design system

- [ ] Implement Navigation State Management (AC: 5)
  - [ ] Add active page detection logic
  - [ ] Implement parent group expansion for current page
  - [ ] Add state persistence for collapse preference

- [ ] Add Keyboard and Accessibility Features (AC: 6)
  - [ ] Implement Cmd/Ctrl + B keyboard shortcut
  - [ ] Add proper ARIA labels for all navigation elements
  - [ ] Configure tooltips for collapsed state
  - [ ] Test screen reader compatibility

- [ ] Responsive Implementation (AC: 4)
  - [ ] Configure mobile sheet overlay behavior
  - [ ] Implement touch-friendly targets
  - [ ] Test across mobile, tablet, desktop breakpoints

- [ ] Testing (AC: All)
  - [ ] Unit tests for navigation components
  - [ ] Integration tests for state management
  - [ ] Accessibility testing with keyboard navigation
  - [ ] Cross-browser compatibility testing

## Dev Notes

### Technology Stack Context
[Source: docs/TECHNICAL_OVERVIEW.md]
- **Frontend**: Next.js 15.2.4 with TypeScript and React 19
- **Styling**: Tailwind CSS 4.1.9 with shadcn/ui components
- **UI Components**: Radix UI + Custom components  
- **Icons**: Lucide React (maintain consistency with existing icons)

### Component Architecture
[Source: docs/front-end-spec.md]
The implementation should use the following shadcn components:
- `SidebarProvider` - Main wrapper for sidebar context
- `Sidebar` - Main sidebar container with responsive behavior
- `SidebarContent` - Scrollable content area
- `SidebarGroup` - Group containers for organizing navigation
- `SidebarGroupLabel` - Headers for each navigation group
- `SidebarGroupContent` - Container for group menu items
- `SidebarMenu` - Menu container within groups
- `SidebarMenuItem` - Individual navigation items
- `SidebarMenuButton` - Interactive navigation buttons
- `SidebarInset` - Main content area wrapper
- `SidebarTrigger` - Mobile hamburger menu trigger

### File Locations
[Source: existing project structure]
- Main Layout: `app/admin/layout.tsx` 
- Sidebar Component: `components/admin/admin-sidebar.tsx`
- Header Component: `components/admin/admin-header.tsx`
- shadcn UI Components: `components/ui/sidebar.tsx` (already available)

### Current Navigation Items + Required Additions
[Source: components/admin/admin-sidebar.tsx]
```typescript
const sidebarItems = [
  // Live Operations Group
  { title: "Dashboard", href: "/admin", icon: Home },
  { title: "Live Games", href: "/admin/games", icon: Play },
  { title: "Schedule", href: "/admin/schedule", icon: Calendar },
  
  // Content Management Group  
  { title: "Shows", href: "/admin/shows", icon: Tv },
  { title: "News", href: "/admin/news", icon: Newspaper },
  { title: "Media", href: "/admin/media", icon: Image }, // TO BE ADDED
  
  // User & Teams Group
  { title: "Teams", href: "/admin/teams", icon: Users },
  { title: "User Management", href: "/admin/users", icon: Shield },
  { title: "Chat Moderation", href: "/admin/chat", icon: MessageSquare },
  
  // Analytics & System Group
  { title: "Statistics", href: "/admin/stats", icon: BarChart3 },
  { title: "Analytics", href: "/admin/analytics", icon: TrendingUp }, // TO BE ADDED
  { title: "Settings", href: "/admin/settings", icon: Settings },
]
```

### Soft Pop Theme Specifications
[Source: docs/front-end-spec.md]
- **Primary Color**: `oklch(0.5106 0.2301 276.9656)` (Purple)
- **Secondary Color**: `oklch(0.7038 0.1230 182.5025)` (Cyan)
- **Accent Color**: `oklch(0.7686 0.1647 70.0804)` (Yellow-green)
- **Border Radius**: `1rem` for all components
- **Fonts**: DM Sans (primary), Space Mono (monospace)

### Navigation Group Organization
[Source: docs/front-end-spec.md]
1. **Live Operations**: Dashboard, Live Games, Schedule
2. **Content Management**: Shows, News, Media (needs to be added)
3. **User & Teams**: Teams, User Management, Chat Moderation  
4. **Analytics & System**: Statistics, Analytics (needs to be added), Settings

### AdminAuthWrapper Integration
[Source: components/admin/admin-auth-wrapper.tsx]
The existing AdminAuthWrapper handles:
- Clerk authentication with organization-based access control
- CSN organization membership validation
- Development mode bypass for testing
- Loading states and access denied UI
- User role checking (admin/member permissions)

**Critical**: The new SidebarProvider must work seamlessly within the AdminAuthWrapper without disrupting the authentication flow or organization access control.

### Testing Requirements

#### Testing Standards
- **Test Location**: Tests should be co-located with components in `__tests__` directories
- **Framework**: Use existing Jest + React Testing Library setup
- **Test Types**: Unit tests for components, integration tests for navigation behavior

#### Specific Testing Requirements
- Navigation between sections works correctly (including new Media and Analytics routes)
- Active state highlighting functions properly
- Keyboard shortcuts (Cmd/Ctrl + B) toggle sidebar
- Mobile sheet overlay opens/closes correctly
- Responsive behavior at different breakpoints
- Accessibility: keyboard navigation, screen reader support
- Theme application and color consistency
- AdminAuthWrapper integration does not break authentication flow
- Organization-based access control continues to work properly

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2024-01-15 | 1.0 | Initial story creation | Scrum Master |

## Dev Agent Record

*This section will be populated by the development agent during implementation*

### Agent Model Used
*To be filled by dev agent*

### Debug Log References  
*To be filled by dev agent*

### Completion Notes List
*To be filled by dev agent*

### File List
*To be filled by dev agent*

## QA Results

*Results from QA Agent review will be added here after implementation*